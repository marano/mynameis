<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet/less" type="text/css" href="css/helper.less" />
    <link rel="stylesheet/less" type="text/css" href="css/common.less" />
    <link rel="stylesheet/less" type="text/css" href="css/viewport.less" />
    <link rel="stylesheet/less" type="text/css" href="css/hud.less" />
    <link rel="stylesheet/less" type="text/css" href="css/map-view.less" />
    <link rel="stylesheet/less" type="text/css" href="css/balloon.less" />
    <link rel="stylesheet" type="text/css" href="vendor/animate.css" />
    <script src="vendor/lodash.js"></script>
    <script src="vendor/jquery-2.1.1.js"></script>
    <script src="vendor/jquery.transit.min.js"></script>
    <script src="vendor/knockout-3.2.0.js"></script>
    <script src="vendor/knockout.punches.min.js"></script>
    <script src="js/less-setup.js"></script>
    <script src="vendor/less.js"></script>
    <script src="vendor/dragdealer.js"></script>
    <script src="vendor/keypress.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/World.js"></script>
    <script src="js/WorldTile.js"></script>
    <script src="js/Direction.js"></script>
    <script src="js/WorldObject.js"></script>
    <script src="js/WorldObjectFactory.js"></script>
    <script src="js/UIElement.js"></script>
    <script src="js/Tickable.js"></script>
    <script src="js/Routine.js"></script>
    <script src="js/MoveRoutineStep.js"></script>
    <script src="js/actions/MoveAction.js"></script>
    <script src="js/actions/PauseAction.js"></script>
    <script src="js/router/Route.js"></script>
    <script src="js/router/OpenTile.js"></script>
    <script src="js/router/ExpandedTile.js"></script>
    <script src="js/view_models/GameViewModel.js"></script>
    <script src="js/view_models/HudViewModel.js"></script>
    <script src="js/initializer.js"></script>
  </head>
  <body>
    <div class="viewport" data-bind="template: {name: 'ui-element-template', foreach: world.viewportUiElements, as: 'uiElement'}"></div>

    <div data-bind="template: {name: 'hud-template', data: hud, as: 'hud'}"></div>

    <script type="text/html" id="hud-template">
      <div id="hud">
        <div class="side-menu">
          <div data-bind="template: {name: 'side-menu-object-template', foreach: hud.worldObjectsFromSelection, as: 'worldObject'}"></div>
        </div>
        <div class="bottom-menu-wrapper">
          <div class="bottom-menu">
            <div class="pause" data-bind="template: {name: 'hud-action-template', data: hud.pauseAction, as: 'action'}"></div>
          </div>
        </div>
      </div>
    </script>

    <script type="text/html" id="side-menu-object-template">
      <div class="object">
        <div class="name">{{worldObject.name}}</div>
        <div class="actions" data-bind="template: {name: 'hud-action-template', foreach: worldObject.actions, as: 'action'}"></div>
      </div>
    </script>

    <script type="text/html" id="hud-action-template">
      <div class="action {{action.name}}" data-bind="click: action.select, event: {mouseover: action.mouseover}, css: {'active': action.active}">{{action.name}}</div>
    </script>

    <script type="text/html" id="ui-element-template">
      <div class="ui-element {{uiElement.classesToApply}}" data-bind="if: uiElement.content, click: onClick, attr: {style: uiElement.style}">
        <div class="content-wrapper">
          <div class="content">
            {{uiElement.content}}
          </div>
        </div>
      </div>
    </script>
  </body>
</html>
