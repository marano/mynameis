<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet/less" type="text/css" href="css/helper.less" />
    <link rel="stylesheet/less" type="text/css" href="css/common.less" />
    <link rel="stylesheet/less" type="text/css" href="css/viewport.less" />
    <link rel="stylesheet/less" type="text/css" href="css/sidebar.less" />
    <link rel="stylesheet/less" type="text/css" href="css/map-view.less" />
    <link rel="stylesheet/less" type="text/css" href="css/balloon.less" />
    <link rel="stylesheet" type="text/css" href="vendor/animate.css" />
    <script src="vendor/lodash.js"></script>
    <script src="vendor/jquery-2.1.1.js"></script>
    <script src="vendor/jquery.transit.min.js"></script>
    <script src="vendor/knockout-3.2.0.js"></script>
    <script src="vendor/knockout.punches.min.js"></script>
    <script src="vendor/less.js"></script>
    <script src="vendor/dragdealer.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/World.js"></script>
    <script src="js/WorldTile.js"></script>
    <script src="js/WorldObject.js"></script>
    <script src="js/WorldObjectFactory.js"></script>
    <script src="js/UIElement.js"></script>
    <script src="js/MoveAction.js"></script>
    <script src="js/router/Route.js"></script>
    <script src="js/router/OpenTile.js"></script>
    <script src="js/router/ExpandedTile.js"></script>
    <script src="js/view_models/GameViewModel.js"></script>
    <script src="js/view_models/SidebarViewModel.js"></script>
    <script src="js/initializer.js"></script>
  </head>
  <body>
    <div class="canvas" data-bind="template: {name: 'map-view-template'}, attr: {style: world.canvasStyle}"></div>

    <div data-bind="template: {name: 'sidebar-template', data: sidebar}"></div>

    <script type="text/html" id="sidebar-template">
        <div id="sidebar">
          <div data-bind="template: {name: 'sidebar-object-item-template', foreach: worldObjectsFromSelection, as: 'worldObject'}"></div>
        </div>
    </script>

    <script type="text/html" id="sidebar-object-item-template">
        <div class="object">
            <div class="name">{{worldObject.name}}</div>
            <div class="actions" data-bind="template: {name: 'sidebar-object-item-action-template', foreach: worldObject.actions, as: 'action'}"></div>
        </div>
    </script>

    <script type="text/html" id="sidebar-object-item-action-template">
        <div class="action {{action.name}}" data-bind="click: action.select, event: {mouseover: action.mouseover}, css: {'active': action.active}">{{action.name}}</div>
    </script>

    <script type="text/html" id="map-view-template">
        <div class="map-grid" data-bind="template: {name: 'ui-element-template', foreach: world.uiElements, as: 'uiElement'}"></div>
    </script>

    <script type="text/html" id="ui-element-template">
        <div id="{{uiElement.elementId}}" class="ui-element {{uiElement.classesToApply}}" data-bind="click: onClick, attr: {style: uiElement.style}">{{uiElement.content}}</div>
    </script>

    <!--<script type="text/html" id="map-view-tile-template">-->
        <!--<div class="tile" data-bind="click: onClick, template: {name: 'ui-element-template', foreach: tile.uiElements, as: 'uiElement'}"></div>-->
    <!--</script>-->
  </body>
</html>
